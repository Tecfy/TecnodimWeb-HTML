(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d6186"],{"70a8":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return null!==t.itemsSliced?a("div",{staticClass:"rate-dossie-selected-group"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-8"},[a("p",{staticClass:"content-heading pt-0"},[a("i",{staticClass:"si si-arrow-left"}),a("span",{staticClass:"h3"},[t._v("Classificar Dossiê - "),a("span",{staticClass:"h5"},[a("i",[t._v("("+t._s(t.itemsSliced.name)+")")])])]),a("router-link",{staticClass:"btn btn-dark btn-lg float-right shadow-sm text-uppercase",attrs:{to:"/rate-dossie/"}},[a("i",{staticClass:"fa fa-arrow-left mr-10"}),t._v(" Voltar\n        ")])],1)])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8 left-content"},[a("div",{staticClass:"block block-rounded shadow-sm pb-0 block-group"},[t.loading.pagesPdf?a("div",[t._m(0)]):a("div",{staticClass:"block-header"},t._l(t.itemsSliced.slicePages,function(e,s){return a("img",{key:s,staticClass:"mx-10",class:t.stepClass(s),attrs:{width:"80",src:e.thumb,alt:"Pdf thumbnail"},on:{click:function(e){t.thumbNav(s)}}})}),0),t.loading.pagesPdf?a("div",[t._m(2)]):a("div",{staticClass:"block-content pr-15 pt-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"pt-30 pr-0",class:{"col-10":!t.loading.buttonsPage,"col-9":t.loading.buttonsPage}},[t.loadImg?a("div",{staticClass:"col-1 loadImg vertical-align mx-auto"},[a("i",{staticClass:"fa fa-spinner fa-spin fa-3x"})]):t._e(),a("div",{staticClass:"pageContainer"},[a("div",{directives:[{name:"dragged",rawName:"v-dragged",value:t.onDragged,expression:"onDragged"}],staticClass:"imgPage"},[a("img",{directives:[{name:"show",rawName:"v-show",value:!t.loadImg,expression:"!loadImg"}],ref:"imagePage",staticClass:"img-fluid",attrs:{draggable:"false",id:"imagePage",src:t.imageUrl,alt:"photo"},on:{load:t.imgLoaded}})])])]),t.loading.buttonsPage?a("div",{staticClass:"col-1 px-0 mx-0"},[a("div",{staticClass:"row text-center vertical-align nav-pages"},[a("div",{staticClass:"col-12 px-0"},[a("a",{staticClass:"btn btn-lg btn-alt-primary pt-3 push",attrs:{"data-title":"Próxima página | ctrl + alt + → "},on:{click:function(e){t.navPage("next")}}},[a("i",{staticClass:"fa fa-angle-double-right"})])]),a("div",{staticClass:"col-12 px-0"},[a("a",{staticClass:"btn btn-lg btn-alt-primary pt-3 push",attrs:{"data-title":"Voltar página | ctrl + alt + ← "},on:{click:function(e){t.navPage("prev")}}},[a("i",{staticClass:"fa fa-angle-double-left"})])])])]):t._e(),a("div",{staticClass:"col-2 bg-gray-lighter image-buttons"},[a("div",{staticClass:"row text-center vertical-align"},[a("div",{staticClass:"col-12"},[a("a",{staticClass:"btn btn-lg btn-success pt-3 push text-white",attrs:{"data-title":"Aumentar zoom | ctrl + alt + z "},on:{click:function(e){t.zoomPage("zoomIn")}}},[a("i",{staticClass:"fa fa-search-plus"})])]),a("div",{staticClass:"col-12"},[a("a",{staticClass:"btn btn-lg btn-success pt-3 push text-white",attrs:{"data-title":"Diminuir zoom | ctrl + alt + x "},on:{click:function(e){t.zoomPage("zoomOut")}}},[a("i",{staticClass:"fa fa-search-minus"})])]),a("div",{staticClass:"col-12"},[a("a",{staticClass:"btn btn-lg btn-success pt-3 push text-white",attrs:{"data-title":"Rotacionar para esquerda | ctrl + alt + < "},on:{click:function(e){t.pageRotate("l")}}},[a("i",{staticClass:"fa fa-rotate-left"})])]),a("div",{staticClass:"col-12"},[a("a",{staticClass:"btn btn-lg btn-success pt-3 push text-white",attrs:{"data-title":"Rotacionar para direita | ctrl + alt + > "},on:{click:function(e){t.pageRotate("r")}}},[a("i",{staticClass:"fa fa-rotate-right"})])]),t.loading.buttonsPage?a("div",{staticClass:"col-12"},[t._m(1)]):t._e()])])])])]),t._m(3)]),a("div",{staticClass:"col-md-4 right-content"},[a("div",{ref:"contentSidebar",staticClass:"content-sidebar"},[a("div",{staticClass:"block block-rounded shadow bg-primary student-data"},[t._m(4),a("div",{staticClass:"block-content"},[a("p",{staticClass:"text-white"},[a("i",{staticClass:"fa fa-file-text-o mr-10"}),a("strong",[t._v("Número da\n              Matrícula:")]),t._v(" "+t._s(t.student.registration))]),a("p",{staticClass:"text-white"},[a("i",{staticClass:"fa fa-user mr-10"}),a("strong",[t._v("Nome:")]),t._v(" "+t._s(t.student.name)+"\n            ")]),a("p",{staticClass:"text-white"},[a("i",{staticClass:"fa fa-building mr-10"}),a("strong",[t._v("Unidade:")]),t._v("\n              "+t._s(t.student.unity))]),a("p",{staticClass:"text-white"},[a("i",{staticClass:"fa fa-graduation-cap mr-1"}),a("strong",[t._v("Curso:")]),t._v("\n              "+t._s(t.student.course))])])]),a("div",{staticClass:"block block-themed block-rounded shadow actions-content"},[t._m(5),a("div",{staticClass:"block-content bg-primary pt-30 pb-10"},[a("div",{staticClass:"form-group row actions-selected"},[a("div",{staticClass:"col-md-6"},[a("router-link",{staticClass:"btn btn-sm btn-block btn-gray-300 mr-5 mb-5 shadow",attrs:{to:"/rate-dossie-selected/"+t.id}},[a("b",[t._v("Pendentes: ")]),a("span",[t._v(t._s(t.student.notClassificated))])])],1),a("div",{staticClass:"col-md-6"},[a("router-link",{staticClass:"btn btn-sm btn-block btn-gray-500 text-black mr-5 mb-5 shadow",attrs:{to:"/rate-dossie-selected/"+t.id}},[a("b",[t._v("Classificados: ")]),a("span",[t._v(t._s(t.student.classificated))])])],1)])])]),a("div",{staticClass:"block block-themed block-rounded shadow actions-content"},[t._m(6),a("div",{staticClass:"block-content bg-primary pt-10 pb-10"},[a("form",{attrs:{action:"",method:"post",onsubmit:"return false;"}},[a("div",{staticClass:"form-group row"},[t._m(7),a("div",{staticClass:"col-md-9 pr-0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchField,expression:"searchField"}],ref:"searchCode",staticClass:"form-control",attrs:{type:"text",id:"classification-code",placeholder:"Ex.: 001, 125.3"},domProps:{value:t.searchField},on:{input:function(e){e.target.composing||(t.searchField=e.target.value)}}})]),a("div",{staticClass:"col-md-3"},[a("button",{staticClass:"btn btn-alt-primary btn-block p-0",attrs:{type:"submit"},on:{click:t.searchByCode}},[a("i",{staticClass:"fa fa-search"})])])])]),a("div",{staticClass:"row"},[t._m(8),a("form",{staticClass:"col-12",attrs:{action:"",method:"post",onsubmit:"return false;"}},[a("div",{staticClass:"form-group row"},[t._l(t.subCategories,function(e,s){return e.length>0?a("div",{key:s,staticClass:"scrumboard js-scrumboard col-12 p-0"},[a("div",{staticClass:"scrumboard-items block-content pt-0"},[a("div",{staticClass:"scrumboard-item badge-pill bg-primary text-black py-0 px-15"},[a("div",{staticClass:"scrumboard-item-content pt-5"},[t._v("\n                          "+t._s(e)+"\n                        ")])])])]):t._e()}),a("div",{staticClass:"col-12",class:{"mt-20":0!==this.additionalFields}},[a("v-select",{ref:"selectCategory",attrs:{options:t.categories,label:"name",selected:t.selected_category.name},model:{value:t.selected_category,callback:function(e){t.selected_category=e},expression:"selected_category"}},[a("span",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("Nenhum resultado encontrado")])])],1)],2)])])]),a("form",{attrs:{action:"",method:"post",onsubmit:"return false;"}},[t.additionalFields.length>0?a("div",{staticClass:"aditionalFields bg-primary"},[t._m(9),a("div",{staticClass:"block-content bg-primary pt-0"},t._l(t.additionalFields,function(e,s){return a("div",{key:s},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-12 col-form-label text-white",attrs:{for:"field"+s}},[a("b",[t._v(t._s(e.name))])]),a("div",{staticClass:"col-12"},[0===t.itemsSliced.additionalFields.length?a("div",["string"===e.type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.additionalFields[s].value,expression:"additionalFields[i].value"},{name:"validate",rawName:"v-validate",value:{required:e.required},expression:"{required:e.required}"}],ref:"identificador"+s,refInFor:!0,staticClass:"form-control",attrs:{type:"text","data-vv-as":e.name,name:e.categoryAdditionalFieldId.toString(),id:"field"+s},domProps:{value:t.additionalFields[s].value},on:{input:function(e){e.target.composing||t.$set(t.additionalFields[s],"value",e.target.value)}}}):t._e(),"datetime"===e.type?a("input",{directives:[{name:"mask",rawName:"v-mask",value:"##/##/####",expression:"'##/##/####'"},{name:"model",rawName:"v-model",value:t.additionalFields[s].value,expression:"additionalFields[i].value"},{name:"validate",rawName:"v-validate",value:{required:e.required,date_format:"DD/MM/YYYY"},expression:"{required:e.required,date_format:'DD/MM/YYYY'}"}],ref:"identificador"+s,refInFor:!0,staticClass:"form-control u-full-width",attrs:{type:"text","data-vv-as":e.name,name:e.categoryAdditionalFieldId.toString(),id:"field"+s,placeholder:"dd/mm/aaaa"},domProps:{value:t.additionalFields[s].value},on:{input:function(e){e.target.composing||t.$set(t.additionalFields[s],"value",e.target.value)}}}):t._e(),"bool"===e.type?a("div",[a("div",{staticClass:"custom-control custom-radio custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.additionalFields[s].value,expression:"additionalFields[i].value"},{name:"validate",rawName:"v-validate",value:{required:e.required,included:["SIM","NÃO"]},expression:"{required:e.required,included: ['SIM','NÃO']}"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"yes_field"+s,"data-vv-as":e.name,name:e.categoryAdditionalFieldId.toString(),value:"SIM"},domProps:{checked:t._q(t.additionalFields[s].value,"SIM")},on:{change:function(e){t.$set(t.additionalFields[s],"value","SIM")}}}),a("label",{staticClass:"custom-control-label text-white",attrs:{for:"yes_field"+s}},[a("strong",[t._v("Sim")])])]),a("div",{staticClass:"custom-control custom-radio custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.additionalFields[s].value,expression:"additionalFields[i].value"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"no_field"+s,"data-vv-as":e.name,name:e.categoryAdditionalFieldId.toString(),value:"NÃO"},domProps:{checked:t._q(t.additionalFields[s].value,"NÃO")},on:{change:function(e){t.$set(t.additionalFields[s],"value","NÃO")}}}),a("label",{staticClass:"custom-control-label text-white",attrs:{for:"no_field"+s}},[a("strong",[t._v("Não")])])])]):t._e()]):a("div",["string"===e.type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.itemsSliced.additionalFields[s].value,expression:"itemsSliced.additionalFields[i].value"},{name:"validate",rawName:"v-validate",value:{required:e.required},expression:"{required:e.required}"}],ref:"identificador"+s,refInFor:!0,staticClass:"form-control",attrs:{type:"text","data-vv-as":e.name,name:e.categoryAdditionalFieldId.toString(),id:"field"+s},domProps:{value:t.itemsSliced.additionalFields[s].value},on:{input:function(e){e.target.composing||t.$set(t.itemsSliced.additionalFields[s],"value",e.target.value)}}}):t._e(),"datetime"===e.type?a("input",{directives:[{name:"mask",rawName:"v-mask",value:"##/##/####",expression:"'##/##/####'"},{name:"model",rawName:"v-model",value:t.itemsSliced.additionalFields[s].value,expression:"itemsSliced.additionalFields[i].value"},{name:"validate",rawName:"v-validate",value:{required:e.required,date_format:"DD/MM/YYYY"},expression:"{required:e.required,date_format:'DD/MM/YYYY'}"}],ref:"identificador"+s,refInFor:!0,staticClass:"form-control u-full-width",attrs:{type:"text","data-vv-as":e.name,name:e.categoryAdditionalFieldId.toString(),id:"field"+s,placeholder:"dd/mm/aaaa"},domProps:{value:t.itemsSliced.additionalFields[s].value},on:{input:function(e){e.target.composing||t.$set(t.itemsSliced.additionalFields[s],"value",e.target.value)}}}):t._e(),"bool"===e.type?a("div",[a("div",{staticClass:"custom-control custom-radio custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.itemsSliced.additionalFields[s].value,expression:"itemsSliced.additionalFields[i].value"},{name:"validate",rawName:"v-validate",value:{required:e.required,included:["SIM","NÃO"]},expression:"{required:e.required,included: ['SIM','NÃO']}"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"yes_field"+s,"data-vv-as":e.name,name:e.categoryAdditionalFieldId.toString(),value:"SIM"},domProps:{checked:t._q(t.itemsSliced.additionalFields[s].value,"SIM")},on:{change:function(e){t.$set(t.itemsSliced.additionalFields[s],"value","SIM")}}}),a("label",{staticClass:"custom-control-label text-white",attrs:{for:"yes_field"+s}},[a("strong",[t._v("Sim")])])]),a("div",{staticClass:"custom-control custom-radio custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.itemsSliced.additionalFields[s].value,expression:"itemsSliced.additionalFields[i].value"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"no_field"+s,"data-vv-as":e.name,name:e.categoryAdditionalFieldId.toString(),value:"NÃO"},domProps:{checked:t._q(t.itemsSliced.additionalFields[s].value,"NÃO")},on:{change:function(e){t.$set(t.itemsSliced.additionalFields[s],"value","NÃO")}}}),a("label",{staticClass:"custom-control-label text-white",attrs:{for:"no_field"+s}},[a("strong",[t._v("Não")])])])]):t._e()]),a("span",{staticClass:"text-danger-light"},[t._v(t._s(t.errors.first(e.categoryAdditionalFieldId.toString())))])])])])}),0)]):t._e(),a("div",{staticClass:"block-content bg-primary pt-0 pb-10"},[a("div",{staticClass:"form-group row"},[a("div",{staticClass:"col-12 pt-20 mt-5"},[a("button",{ref:"saveCategoryButton",staticClass:"btn btn-lg btn-dark shadow-sm btn-block text-uppercase",attrs:{type:"submit"},on:{click:function(e){t.sendClassification()}}},[a("i",{staticClass:"fa fa-save"}),t._v(" Salvar\n                  ")])])])])])])])])]),t._m(10),a("div",{ref:"delmodal",staticClass:"modal fade",attrs:{id:"modal-del-page",tabindex:"-1",role:"dialog","aria-labelledby":"modal-del-page","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-slideup",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(11),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn-dark btn-lg float-right shadow-sm text-uppercase",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){t.deletePage()}}},[a("i",{staticClass:"si si-check mr-10"}),t._v(" Apagar página\n          ")])])])])])]):t._e()},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h2",{staticClass:"text-center"},[a("i",{staticClass:"fa fa-spinner fa-spin"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"btn btn-lg btn-success js-tooltip pt-3 push text-white",attrs:{"data-title":"Excluir página | ctrl + alt + ◄ ","data-toggle":"modal","data-target":"#modal-del-page"}},[a("i",{staticClass:"fa fa-trash"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h2",{staticClass:"text-center"},[a("i",{staticClass:"fa fa-spinner fa-spin"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("p",[a("small",[a("b",[t._v("Aumentar Zoom:")]),t._v(" ctrl + shift + z / "),a("b",[t._v("Diminuir Zoom:")]),t._v(" ctrl + shift + x / "),a("b",[t._v("Rot.\n              Esquerda:")]),t._v(" ctrl + shift + < / "),a("b",[t._v("Rot. Direita:")]),t._v(" ctrl + shift + > / "),a("b",[t._v("Apagar página")]),t._v(" ctrl +\n              shift + backspace / "),a("b",[t._v("Salvar")]),t._v(" ctrl + shift + s / "),a("b",[t._v("Avançar página")]),t._v(" ctrl + shift + → / "),a("b",[t._v("Voltar\n                página")]),t._v(" ctrl + shift + ←\n            ")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"block-header"},[a("h4",{staticClass:"block-title text-center text-white"},[t._v("Dados do aluno")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"block-header bg-gd-emerald shadow"},[a("h4",{staticClass:"block-title text-center text-white"},[t._v("Ações")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"block-header bg-gd-emerald"},[a("h4",{staticClass:"block-title text-center text-white"},[t._v("Campos para classificação")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"col-12 col-form-label text-white",attrs:{for:"classification-code"}},[a("b",[t._v("Código")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 text-white my-10"},[a("b",[t._v("Tipo")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"block-header rounded-0 px-0"},[a("h4",{staticClass:"block-title bg-green-title py-5 px-15 text-dark text-center"},[t._v("Campos adicionais")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"modal-save",tabindex:"-1",role:"dialog","aria-labelledby":"modal-save","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-slideup",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"block block-themed block-transparent mb-0 "},[a("div",{staticClass:"block-header bg-white p-0 pt-10 ml-20"},[a("h3",{staticClass:"block-title text-black"},[a("b",[t._v("Salvar classificação?")])]),a("div",{staticClass:"block-options mr-15"},[a("button",{staticClass:"btn-block-option text-dark",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("i",{staticClass:"si si-close"})])])]),a("hr"),a("div",{staticClass:"block-content pt-0"},[a("p",[t._v("Você realmente deseja finalizar a classificação? Você não poderá retornar para o grupo de\n              classificação atual.")])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn-dark btn-lg float-right shadow-sm text-uppercase",attrs:{type:"button","data-dismiss":"modal"}},[a("i",{staticClass:"si si-check mr-10"}),t._v(" Salvar Grupo\n          ")])])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"block block-themed block-transparent mb-0 "},[a("div",{staticClass:"block-header p-0 pt-10 mb-30"},[a("h4",{staticClass:"text-white mx-auto pt-10 pl-50"},[a("b",[t._v("Deletar página?")])]),a("div",{staticClass:"block-options mr-15"},[a("button",{staticClass:"btn-block-option text-dark",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("h5",[a("i",{staticClass:"si si-close"})])])])]),a("div",{staticClass:"block-content pt-0"},[a("h6",{staticClass:"mb-20 mt-50"},[a("small",[a("i",{staticClass:"fa fa-chevron-right"})]),t._v("\n              Deseja realmente remover a página?\n            ")])])])}],o=(a("7f7f"),a("cadf"),a("551c"),a("097d"),a("46f1")),l=a("f121"),d=a("3d20"),n=a.n(d),r={data:function(){return{apiUrl:l["a"].apiUrl,id:this.$route.params.id,slice_id:this.$route.params.slice_id,categoryId:null,categories:[],itemsSliced:[],loading:{pagesPdf:!1,pagesThumb:!1,buttonsPage:!1},imageUrl:"",countPage:0,numPages:1,slicePages:[],additionalFields:[],valClassFields:[],student:{name:"-",unity:"-",course:"-",registration:"-"},selected_category:"Selecione",rotatePage:0,zoom:1,subCategories:[],validateSubCategories:!1,searchField:"",loadImg:!0,dragged:!1,keys:[]}},methods:{onDragged:function(t){var e=t.el,a=t.deltaX,s=t.deltaY,i=t.first,o=t.last;if(i)this.dragged=!0;else if(o)this.dragged=!1;else{var l=+window.getComputedStyle(e)["left"].slice(0,-2)||0,d=+window.getComputedStyle(e)["top"].slice(0,-2)||0;e.style.left=l+a+"px",e.style.top=d+s+"px"}},getPdf:function(){var t=this;this.id=this.$route.params.id,this.slice_id=this.$route.params.slice_id,this.loading.pagesPdf=!0,this.slice_id?o["default"].get("/slices/GetSliceById/"+this.slice_id).then(function(e){var a=e.data;if(null===t.itemsSliced){var s={documentId:t.id,documentStatusId:6};return o["default"].post("/Documents/PostDocumentUpdateSatus",s).then(function(){t.updateSubCategories(t.categoryId)}).catch(function(){}),n()({title:"Classificação de Dossiê finalizado!",text:"Todas os recortes foram classificadas com sucesso.",type:"success"}).then(function(){return t.$router.push("/rate-dossie")})}t.itemsSliced=a.result,t.slice_id=t.itemsSliced.sliceId,t.numPages=t.itemsSliced.slicePages.length,t.loading.pagesPdf=!1,t.imageUrl=t.itemsSliced.slicePages[t.countPage].image,t.$refs.searchCode.focus(),t.$router.push("/rate-dossie-selected-single/"+t.id),t.itemsSliced.slicePages.length>=2?t.loading.buttonsPage=!0:t.loading.buttonsPage=!1,t.categoryId=t.itemsSliced.categoryId,t.updateSubCategories(t.categoryId)}):o["default"].get("/slices/GetSlicePending/"+this.id).then(function(e){var a=e.data;if(!0!==a.success)return n()({title:"Erro desconhecido!",text:"Tente novamente mais tarde.",type:"error"});if(null===a.result){var s={documentId:t.id,documentStatusId:6};return o["default"].post("/Documents/PostDocumentUpdateSatus",s).then(function(){}).catch(function(){}),n()({title:"Classificação de Dossiê finalizado!",text:"Todas os recortes foram classificadas com sucesso.",type:"success"}).then(function(){return t.$router.push("/rate-dossie")})}t.itemsSliced=a.result,t.slice_id=t.itemsSliced.sliceId,t.numPages=t.itemsSliced.slicePages.length,t.loading.pagesPdf=!1,t.imageUrl=t.itemsSliced.slicePages[t.countPage].image,t.$refs.searchCode.focus(),t.itemsSliced.slicePages.length>=2?t.loading.buttonsPage=!0:t.loading.buttonsPage=!1})},getDetails:function(){var t=this;this.id=this.$route.params.id,o["default"].get("/documentDetails/GetDocumentDetailByDocumentId/"+this.id).then(function(e){var a=e.data;!0===a.success&&(t.student=a.result)})},getCategories:function(){var t=this;o["default"].get("/categories/getCategories").then(function(e){var a=e.data;t.categories=a.result})},updateSubCategories:function(){var t=this;null===this.categoryId||void 0===this.categoryId?this.categoryId=this.itemsSliced.categoryId:o["default"].get("/Categories/GetCategoryById/"+this.categoryId).then(function(e){var a,s,i=e.data;if(t.subCategories=i.result.parents,t.additionalFields=i.result.additionalFields,t.validateSubCategories=!0,t.selected_category=i.result.name,null===t.additionalFields||0===t.additionalFields.length)t.$refs.saveCategoryButton.focus();else if(t.additionalFields.length>=1&&t.itemsSliced.additionalFields.length>=1){for(a=0;a<3;a++)t.additionalFields[a].value=t.itemsSliced.additionalFields[a].value,t.$refs.identificador.focus();for(s=t.categories.length,a=0;a<s;a++)t.categories[a].categoryId===t.itemsSliced.categoryId&&(t.selected_category=t.categories[a].name)}})},thumbNav:function(t){this.loadImg=!0,this.countPage=t,this.imageUrl=this.itemsSliced.slicePages[this.countPage].image,this.stepClass(t),this.pageRotate()},navPage:function(t){this.loadImg=!0,"next"===t?this.countPage!==this.numPages-1?this.countPage++:this.countPage=0:this.countPage>=1?this.countPage--:this.countPage=this.numPages-1,this.zoom=1,this.imageUrl=this.itemsSliced.slicePages[this.countPage].image,this.stepClass(this.countPage),this.pageRotate()},imgLoaded:function(){this.loadImg=!1},stepClass:function(t){return t===this.countPage?"active":t!==this.countPage?"":void 0},zoomPage:function(t){"zoomIn"===t&&this.zoom<=2?this.zoom+=.1:"zoomOut"===t&&this.zoom>.3&&(this.zoom-=.1),this.$refs.imagePage.style.transform="scale("+this.zoom+") rotate("+this.rotatePage+"deg)"},pageRotate:function(t){var e=0;this.rotatePage=this.itemsSliced.slicePages[this.countPage].rotate,null==this.rotatePage&&(this.rotatePage=0),null===this.itemsSliced.slicePages[this.countPage].rotate?this.rotatePage=0:this.rotatePage=this.itemsSliced.slicePages[this.countPage].rotate,"l"===t?e-=90:"r"===t?e+=90:e=0,this.rotatePage+e>270?this.rotatePage=0:this.rotatePage+e<0?this.rotatePage=270:this.rotatePage+=e,this.itemsSliced.slicePages[this.countPage].rotate=this.rotatePage,this.$refs.imagePage.style.transform="rotate("+this.rotatePage+"deg)"},sendClassification:function(){var t=this;this.$validator.validate().then(function(e){return e&&t.validateSubCategories?(t.loading.pagesPdf=!1,t.loading.pagesThumb=!1,n()({title:"Confirmar classificação",text:"Deseja realmente fazer a classificação?",showCancelButton:!0,cancelButtonText:"Cancelar"}).then(function(e){if(e.value)return t.postSubmit()})):n()({title:"Dossiê não classificado",text:"Preencha todos os campos obrigatórios",timer:3e3,type:"error"})})},postSubmit:function(){var t=this,e={sliceId:this.slice_id,categoryId:this.categoryId,slicePages:this.itemsSliced.slicePages,additionalFields:this.additionalFields};this.loading.pagesPdf=!0,this.loading.pagesThumb=!0,o["default"].post("/classifications",e).then(function(e){var a=e.data;return a.success?(t.loading.pagesPdf=!1,t.countPage=0,t.itemsSliced=[],t.subCategories=[],t.selected_category="Selecione",t.additionalFields=0,t.validateSubCategories=!1,t.getDetails(),t.getCategories(),t.getPdf(),n()({title:"Classificação do Dossiê salvo com sucesso!",toast:!0,timer:3e3,type:"success",showConfirmButton:!1}).then(function(){})):(t.getPdf(),n()({title:"Erro ao salvar classificação!",toast:!0,timer:3e3,type:"error",showConfirmButton:!1}))}).catch(function(){return t.loading.pagesPdf=!1,n()({title:"Erro ao salvar classificação!",toast:!0,timer:3e3,type:"error",showConfirmButton:!1}).then(function(){return window.location.reload()})})},deletePage:function(){var t=this,e={slicePageId:this.itemsSliced.slicePages[this.countPage].slicePageId};this.loading.pagesPdf=!0,o["default"].post("/SlicePages",e).then(function(){return t.loading.pagesPdf=!1,t.countPage=0,t.getPdf(),n()({title:"Página apagada com sucesso!",toast:!0,timer:3e3,type:"success",showConfirmButton:!1})})},searchByCode:function(){var t=this;o["default"].get("/categories/GetCategoryBySearch?code="+this.searchField).then(function(e){var a=e.data;t.categoryId=a.result.categoryId,t.updateSubCategories(t.categoryId),t.selected_category={categoryId:a.result.categoryId,name:a.result.name},t.$refs.saveCategoryButton.focus(),setTimeout(function(){window.scrollTo(0,document.body.scrollHeight||document.documentElement.scrollHeight)},800)}).catch(function(){return t.loading.pagesPdf=!1,n()({title:"Erro ao localizar Código da Categoria.",toast:!0,timer:3e3,type:"error",showConfirmButton:!1})})},shortCut:function(t){if(t.shiftKey&&t.ctrlKey)switch(t.code){case"KeyZ":this.zoomPage("zoomIn");break;case"KeyX":this.zoomPage("zoomOut");break;case"Comma":this.pageRotate("l");break;case"Period":this.pageRotate("r");break;case"ArrowLeft":this.numPages>1&&this.navPage("prev");break;case"ArrowRight":this.numPages>1&&this.navPage("next");break;case"Backspace":this.numPages>1&&$("#modal-del-page").modal("show");break;case"Space":this.$refs.searchCode.focus();break;case"KeyS":this.sendClassification();break}},showSvg1:function(){var t=this.$refs.contentSidebar;window.scrollY>145?(t.setAttribute("class","content-sidebar onScreen"),window.onscroll=null):(t.setAttribute("class","content-sidebar"),window.onscroll=null)}},watch:{selected_category:function(t){"Selecione"===t||null===t?(this.subCategories=[],this.selected_category="Selecione",this.additionalFields=0,this.validateSubCategories=!1):((null===this.categoryId||void 0===this.categoryId)&&(void 0!==t||t.categoryId>0)||void 0!==t&&t.categoryId>0&&t.categoryId!==this.categoryId)&&(this.categoryId=t.categoryId,this.updateSubCategories()),this.searchField=""}},mounted:function(){null!==this.sliceId&&(this.getDetails(),this.getCategories(),this.getPdf(),this.updateSubCategories(),this.$refs.searchCode.focus())},created:function(){window.addEventListener("keyup",this.shortCut),window.addEventListener("scroll",this.showSvg1),setTimeout(function(){window.scrollTo(0,document.body.scrollHeight||document.documentElement.scrollHeight)},800)},beforeDestroy:function(){window.removeEventListener("keyup",this.shortCut),window.removeEventListener("scroll",this.showSvg1)}},c=r,u=a("2877"),m=Object(u["a"])(c,s,i,!1,null,null,null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2d0d6186.02df4869.js.map